{"id":"qrcode.html","dependencies":[{"name":"./style.css","dynamic":true,"resolved":"C:\\Users\\arjun\\Desktop\\osmosis-conductor\\style.css","parent":"C:\\Users\\arjun\\Desktop\\osmosis-conductor\\qrcode.html"},{"name":"C:\\Users\\arjun\\Desktop\\osmosis-conductor\\package.json","includedInParent":true,"mtime":1583365237398}],"generated":{"html":"<!DOCTYPE html>\n<html>\n  <head>\n    <title>OSMOSIS</title>\n    <script type=\"text/javascript\" src=\"https://rawgit.com/schmich/instascan-builds/master/instascan.min.js\"></script>\t\n    \n    <link rel=\"stylesheet\" href=\"/da232d78aa810382f2dcdceae308ff8e.css\">\n    \n  </head>\n  <body>\n      <div class=\"center\">\n        <video id=\"preview\"></video>\n        <div id=\"button-bar\">\n          <button type=\"button\" class=\"transaction\" id=\"trans1\" onclick=\"StartTransaction()\">Start transaction</button> \n          <button type=\"button\" class=\"transaction\" id=\"trans2\" onclick=\"endTransaction()\">End transaction</button>\n        </div>\n        <div id=\"form-field\"> \n          <label for=\"tickets\" id=\"ticket-label\">Enter No. of Tickets</label>\n          <input type=\"number\" min=\"1\" id=\"tickets\" class=\"mdc-text-field__input\">\n        </div> \n      </div>\n      <div class=\"destination\">\n        \n        <h2>Cash Trips</h2>\n\n        <label for=\"drop_location\">Drop Location</label>\n        <select class=\"Drop\" id=\"drop_location\">\n            <option value=\"banashankari\">Banashankari</option>\n            <option value=\"Silk board\">SilkBoard</option>\n            <option value=\"Hosa Road\">Hosa Road</option>\n\n        </select>\n        <input type=\"button\" value=\"Submit\" onclick=\"confirmation()\">\n\n      </div>\n      \n   \n    <script>var scanner = new Instascan.Scanner({\n  video: document.getElementById('preview')\n});\nscanner.addListener('scan', function (content) {\n  alert('Welcome ' + content); //window.open(content, \"_blank\");\n});\nInstascan.Camera.getCameras().then(function (cameras) {\n  if (cameras.length > 0) {\n    scanner.start(cameras[0]);\n  } else {\n    console.error(\"There is no Camera on this Device!\");\n  }\n});\nvar bus_no = \"KAI9723\";\n\nfunction StartTransaction() {\n  var num_tickets = document.getElementById(\"tickets\").value;\n  var start_stop;\n  fetch('http://127.0.0.1:4010/buses').then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    var route_index = data.routes.map(function (ele, index) {\n      return ele.route;\n    }).indexOf(\"green\");\n    var stops = data.routes[route_index].stops;\n    var stop_name = stops[rand(stops.length)].name;\n    console.log(stop_name);\n    console.log({\n      bus: bus_no,\n      tickets: parseInt(num_tickets),\n      start_stop: stop_name\n    });\n    fetch('http://127.0.0.1:4010/start_transaction', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: {\n        bus: bus_no,\n        tickets: parseInt(num_tickets),\n        start_stop: stop_name\n      }\n    });\n  });\n}\n\nfunction rand(size) {\n  return Math.floor(Math.random() * size);\n}\n\nfunction endTransaction() {\n  fetch('http://127.0.0.1:4010/end_transaction', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: {\n      bus: bus_no\n    }\n  });\n}\n\nfunction confirmation() {\n  var no_tickets = document.getElementById(\"tickets\").value;\n  var destination = document.getElementById(\"drop_location\").value;\n  fetch('http://127.0.0.1:4010/buses').then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    var route_index = data.routes.map(function (ele, index) {\n      return ele.route;\n    }).indexOf(\"green\");\n    var stops = data.routes[route_index].stops;\n    var stop_name = stops[rand(stops.length)].name;\n\n    if (window.confirm(\"Number of tickets:\" + no_tickets + '\\n' + \"Drop location:\" + destination)) {\n      fetch('http://127.0.0.1:4010/cash_transaction', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: {\n          bus: bus_no,\n          tickets: parseInt(no_tickets),\n          start_stop: stop_name,\n          end_stop: destination\n        }\n      });\n    }\n  });\n}</script>\n </body>\n</html>"},"sourceMaps":null,"error":null,"hash":"c7a6b478e0a6c3edd084cc29d8f934bd","cacheData":{"env":{}}}